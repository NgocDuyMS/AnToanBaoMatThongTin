#include<bits/stdc++.h>
using namespace std ;
#define ll long long 
map<char,ll> khoa ;
int mod = 26 ;
string bang_chu_thuong = "abcdefghijklmnopqrstuvwxyz" ;
string bang_chu_hoa = "ABCDEFGHIJKLMNOPQRSTUVWXYZ" ;
int n , m ;
void xuli()
{
    int cnt = 0 ;
     for(auto x:bang_chu_thuong)
     {
         khoa[x] = cnt++ ;
     }
     cnt = 0 ; 
     for(auto x:bang_chu_hoa)
     {
        khoa[x] = cnt++ ;
     }
}
char dich_chuyen(char c , ll k)
{
    if(isalpha(c))
    {
        if(isupper(c))
        {
            c = 'A' + ((c - 'A' + k) % mod + mod) % mod;
        }
        if(islower(c))
        {
            c = 'a' + ((c - 'a' +k) % mod +mod) % mod ;
        }
    }
     
    return c ;
}
string ma_hoa(string p ,string k)
{
    for(int i = 0 ; i<p.size() ; i++)
    {
        p[i] = dich_chuyen(p[i] , khoa[k[i]]) ;
    }
    return p ;
}
string giai_ma(string p ,string k)
{
    for(int i = 0 ; i<p.size() ; i++)
    {
        p[i]  = dich_chuyen(p[i] , -khoa[k[i]]) ;
    }
    return p ;    
}

string chuan_hoa(string p, string key) {
    int n = p.size();
    int m = key.size();
    
   if(m == n)
   {
       return key ;
   }else if(m > n){
        return key.substr(0 , n) ; 
   }else
   {
        string newkey = key ; 
        for(int i = m ; i<n ; i++)
        {
             newkey += p[(i-m) % n ];
        }
        return newkey ; 
   }
}


int main()
{
    cout <<"Nhap van ban :" ;

    string p ; // Đoạn văn bản cần mã hóa
    getline(cin , p) ;
    cout<<'\n' ; 
    cout<<"Nhap khoa :" ;
    string c ; //Đoạn văn bản dùng để làm khóa
    // vigennere lặp khóa
    getline(cin,c) ;
    xuli() ;
    string key = chuan_hoa(p , c) ; 
    string kq = ma_hoa(p ,key) ;
    cout << kq <<endl ;
    cout << giai_ma(ma_hoa(p,key) ,key) ;
    return 0 ;    


}
